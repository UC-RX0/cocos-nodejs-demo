{"version":3,"sources":["file:///D:/CocosProject/cocos-nodejs-io-game-start-demo-master/apps/client/extensions/Behavior%20Eden/src/runtime/node/decorator/Repeater.ts"],"names":["Decorator","NodeStatus","btclass","Repeater","repeatCount","Infinity","curCount","endOnFailure","canExecute","status","Failure","onChildExecuted","_","onStart"],"mappings":";;;;;;;;;AAASA,MAAAA,S,gBAAAA,S;AAAWC,MAAAA,U,gBAAAA,U;;AACXC,MAAAA,O,iBAAAA,O;;;;;0BAGIC,Q,WADZD,OAAO,CAAC,UAAD,C,gBAAR,MACaC,QADb,SAC8BH,SAD9B,CACwC;AAAA;AAAA;AAAA,eAC9BI,WAD8B,GAChBC,QADgB;AAAA,eAE9BC,QAF8B,GAEnB,CAFmB;AAAA,eAG9BC,YAH8B,GAGf,IAHe;AAAA;;AAKtC;AACF;AACA;AACE;AACA;AACA;AACA;AACA;AAEAC,QAAAA,UAAU,GAAY;AACpB,iBACE,KAAKF,QAAL,GAAgB,KAAKF,WAArB,KACC,CAAC,KAAKG,YAAN,IAAuB,KAAKA,YAAL,IAAqB,KAAKE,MAAL,KAAgBR,UAAU,CAACS,OADxE,CADF;AAID;;AAEDC,QAAAA,eAAe,CAACF,MAAD,EAAqBG,CAArB,EAAsC;AACnD,eAAKN,QAAL;AACA,eAAKG,MAAL,GAAcA,MAAd;AACD;;AAEDI,QAAAA,OAAO,GAAG;AACR,gBAAMA,OAAN;AACA,eAAKP,QAAL,GAAgB,CAAhB;AACD;;AA7BqC,O","sourcesContent":["import { Decorator, NodeStatus, Node } from \"../index\";\r\nimport { btclass } from \"../../core/decorator\";\r\n\r\n@btclass(\"Repeater\")\r\nexport class Repeater extends Decorator {\r\n  private repeatCount = Infinity;\r\n  private curCount = 0;\r\n  private endOnFailure = true;\r\n\r\n  /***\r\n   * 参数未来可以通过Shared Variable，这期就不做了\r\n   */\r\n  // constructor(children: Array<Node>, repeatCount = Infinity, endOnFailure = false) {\r\n  //   super(children);\r\n  //   this.repeatCount = repeatCount;\r\n  //   this.endOnFailure = endOnFailure;\r\n  // }\r\n\r\n  canExecute(): boolean {\r\n    return (\r\n      this.curCount < this.repeatCount &&\r\n      (!this.endOnFailure || (this.endOnFailure && this.status !== NodeStatus.Failure))\r\n    );\r\n  }\r\n\r\n  onChildExecuted(status: NodeStatus, _: number): void {\r\n    this.curCount++;\r\n    this.status = status;\r\n  }\r\n\r\n  onStart() {\r\n    super.onStart();\r\n    this.curCount = 0;\r\n  }\r\n}\r\n"]}