{"version":3,"sources":["file:///D:/CocosProject/cocos-nodejs-io-game-start-demo-master/apps/client/extensions/Behavior%20Eden/src/runtime/node/composite/Selector.ts"],"names":["Composite","NodeStatus","btclass","Selector","onStart","index","canExecute","children","length","status","Success","onChildExecuted","_","Failure","Running","onConditionalAbort","Inactive"],"mappings":";;;;;;;;;AAASA,MAAAA,S,gBAAAA,S;AAAWC,MAAAA,U,gBAAAA,U;;AACXC,MAAAA,O,iBAAAA,O;;;;;yBAGYC,Q,WADpBD,OAAO,CAAC,UAAD,C,gBAAR,MACqBC,QADrB,SACsCH,SADtC,CACgD;AAC9CI,QAAAA,OAAO,GAAS;AACd,gBAAMA,OAAN;AACA,eAAKC,KAAL,GAAa,CAAb;AACD;;AAEDC,QAAAA,UAAU,GAAY;AACpB,iBAAO,KAAKD,KAAL,GAAa,KAAKE,QAAL,CAAcC,MAA3B,IAAqC,KAAKC,MAAL,KAAgBR,UAAU,CAACS,OAAvE;AACD;;AAEDC,QAAAA,eAAe,CAACF,MAAD,EAAqBG,CAArB,EAAsC;AACnD,kBAAQH,MAAR;AACE,iBAAKR,UAAU,CAACS,OAAhB;AACE,mBAAKD,MAAL,GAAcR,UAAU,CAACS,OAAzB;AACA;;AACF,iBAAKT,UAAU,CAACY,OAAhB;AACE,mBAAKR,KAAL;;AACA,kBAAI,KAAKA,KAAL,IAAc,KAAKE,QAAL,CAAcC,MAAhC,EAAwC;AACtC,qBAAKC,MAAL,GAAcR,UAAU,CAACY,OAAzB;AACD,eAFD,MAEO;AACL,qBAAKJ,MAAL,GAAcR,UAAU,CAACa,OAAzB;AACD;;AACD;;AACF,iBAAKb,UAAU,CAACa,OAAhB;AACE,mBAAKL,MAAL,GAAcR,UAAU,CAACa,OAAzB;AACA;;AACF;AACE;AAhBJ;AAkBD;;AAEDC,QAAAA,kBAAkB,CAACV,KAAD,EAAgB;AAChC,eAAKA,KAAL,GAAaA,KAAb;AACA,eAAKI,MAAL,GAAcR,UAAU,CAACe,QAAzB;AACD;;AAlC6C,O","sourcesContent":["import { Composite, NodeStatus } from \"../index\";\r\nimport { btclass } from \"../../core/decorator\";\r\n\r\n@btclass(\"Selector\")\r\nexport default class Selector extends Composite {\r\n  onStart(): void {\r\n    super.onStart();\r\n    this.index = 0;\r\n  }\r\n\r\n  canExecute(): boolean {\r\n    return this.index < this.children.length && this.status !== NodeStatus.Success;\r\n  }\r\n\r\n  onChildExecuted(status: NodeStatus, _: number): void {\r\n    switch (status) {\r\n      case NodeStatus.Success:\r\n        this.status = NodeStatus.Success;\r\n        break;\r\n      case NodeStatus.Failure:\r\n        this.index++;\r\n        if (this.index >= this.children.length) {\r\n          this.status = NodeStatus.Failure;\r\n        } else {\r\n          this.status = NodeStatus.Running;\r\n        }\r\n        break;\r\n      case NodeStatus.Running:\r\n        this.status = NodeStatus.Running;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  onConditionalAbort(index: number) {\r\n    this.index = index;\r\n    this.status = NodeStatus.Inactive;\r\n  }\r\n}\r\n"]}